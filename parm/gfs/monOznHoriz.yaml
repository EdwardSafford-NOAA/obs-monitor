datasets:
  - name: horiz
    type: MonDataSpace
    satellite: npp
    sensor: ompsnp
    type: MonDataSpace
    control_file:
      - ../data/ozn_data/horiz/ompsnp_npp.ges.ctl
    filenames:
      - ../data/ozn_data/horiz/ompsnp_npp.ges.2023082118.ieee_d
      - ../data/ozn_data/horiz/ompsnp_npp.ges.2023082112.ieee_d
      - ../data/ozn_data/horiz/ompsnp_npp.ges.2023082106.ieee_d
      - ../data/ozn_data/horiz/ompsnp_npp.ges.2023082100.ieee_d
    levels: &levels 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22
    groups:
      - name: GsiIeee
        variables: &variables [obs]

transforms:
  - transform: select time
    new name: horiz::GsiIeee::obs1
    starting field: horiz::GsiIeee::obs
    cycle: 2023082118
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::lat1
    starting field: horiz::GsiIeee::lat
    cycle: 2023082118
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::lon1
    starting field: horiz::GsiIeee::lon
    cycle: 2023082118
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::obs2
    starting field: horiz::GsiIeee::obs
    cycle: 2023082112
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::lat2
    starting field: horiz::GsiIeee::lat
    cycle: 2023082112
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::lon2
    starting field: horiz::GsiIeee::lon
    cycle: 2023082112
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::obs3
    starting field: horiz::GsiIeee::obs
    cycle: 2023082106
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::lat3
    starting field: horiz::GsiIeee::lat
    cycle: 2023082106
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::lon3
    starting field: horiz::GsiIeee::lon
    cycle: 2023082106
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::obs4
    starting field: horiz::GsiIeee::obs
    cycle: 2023082100
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::lat4
    starting field: horiz::GsiIeee::lat
    cycle: 2023082100
    for:
      variable: [none]

  - transform: select time
    new name: horiz::GsiIeee::lon4
    starting field: horiz::GsiIeee::lon
    cycle: 2023082100
    for:
      variable: [none]

graphics:

  plotting_backend: Emcpy
  figure_list:

  # Map plots
  # ---------

    # Observations
    - batch figure:
        variables: ['obs1']
        levels: *levels
      dynamic options:
        - type: vminvmaxcmap
          level: ${level}
          data variable: horiz::GsiIeee::${variable}

      figure:
        layout: [2,2]
        figure size: [8,7]
        title: "Ozone: Observed Values \n ompsnp_n20, \n level ${level}"
        output name: map_plots/ompsnp_npp/horiz/observed_${level}.png

      plots:
        - mapping:
            projection: plcarr
            domain: global
          add_map_features: ['coastline']
          add_colorbar:
            label: "2023082118"
          add_grid:
          layers:
          - type: MapScatter
            longitude:
              variable: horiz::GsiIeee::lon1
            latitude:
              variable: horiz::GsiIeee::lat1
            data:
              variable: horiz::GsiIeee::obs1
            level: ${level}
            markersize: 2
            colorbar: true
            cmap: 'rainbow'
            vmin: ${dynamic_vmin}
            vmax: ${dynamic_vmax}

        - mapping:
            projection: plcarr
            domain: global
          add_map_features: ['coastline']
          add_colorbar:
            label: "2023082112"
          add_grid:
          layers:
          - type: MapScatter
            longitude:
              variable: horiz::GsiIeee::lon2
            latitude:
              variable: horiz::GsiIeee::lat2
            data:
              variable: horiz::GsiIeee::obs2
            level: ${level}
            markersize: 2
            colorbar: true
            cmap: 'rainbow'
            vmin: ${dynamic_vmin}
            vmax: ${dynamic_vmax}

        - mapping:
            projection: plcarr
            domain: global
          add_map_features: ['coastline']
          add_colorbar:
            label: "2023082106"
          add_grid:
          layers:
          - type: MapScatter
            longitude:
              variable: horiz::GsiIeee::lon3
            latitude:
              variable: horiz::GsiIeee::lat3
            data:
              variable: horiz::GsiIeee::obs3
            level: ${level}
            markersize: 2
            colorbar: true
            cmap: 'rainbow'
            vmin: ${dynamic_vmin}
            vmax: ${dynamic_vmax}

        - mapping:
            projection: plcarr
            domain: global
          add_map_features: ['coastline']
          add_colorbar:
            label: "2023082100"
          add_grid:
          layers:
          - type: MapScatter
            longitude:
              variable: horiz::GsiIeee::lon4
            latitude:
              variable: horiz::GsiIeee::lat4
            data:
              variable: horiz::GsiIeee::obs4
            level: ${level}
            markersize: 2
            colorbar: true
            cmap: 'rainbow'
            vmin: ${dynamic_vmin}
            vmax: ${dynamic_vmax}
